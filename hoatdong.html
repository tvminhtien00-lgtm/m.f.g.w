<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hoạt Động Nhóm - LỬA MIỄN PHÍ</title>
    <style>

        body,html{
            height:100% ;
            width: 100%;
            background-color: #fff;
            display: flex; 
            align-items: center; 
            
        }

        .imgg-area{ 
            display: flex; 
            align-items: center;
            justify-content: center;
            flex-direction: column;
            border: 12px solid #ddd;
            border-radius: 15px;
            background-color: gray;
            height:95%;
            width: 100%;
        }

        .imgg-area img{
            max-height: 100%;
            max-width: 100%;
        }


    </style>


</head>


<body>

    <div>
        <nav style="text-decoration: none;">
            <a href="index.html">Trang Chủ</a> |
            <a href="hoatdong.html">Hoạt Động Nhóm</a>
        </nav>
    </div>

    <img class=" imgg-area" src="img/tkb.png" alt="Mô tả ảnh ">
        

 
    

    
    
</script>
</body>
</html>




<!-- <div class="container identity-box">
        <label style="font-weight: bold;">Danh tính: </label>
        <input type="text" id="user-name-input" placeholder="Nhập tên của bạn..." 
               onchange="saveUsername(this.value)" 
               style="padding: 8px; border-radius: 5px; border: 1px solid #ddd; width: 200px;">
    </div>

    <div class="container" id="gallery">
        <p class="loading-text">Đang kết nối dữ liệu...</p>
    </div>


<script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbwI66pmvlV3qp3QKIvbTHNQ74zaQhUSJICH2OVKLoCT2b8kWRjfQBH6uROC9RzHCtPahw/exec';
    
    // 1. Quản lý danh tính người dùng
    let currentUserName = localStorage.getItem('myUserName') || "Người lạ";
    document.getElementById('user-name-input').value = currentUserName === "Người lạ" ? "" : currentUserName;

    function saveUsername(name) {
        if(name.trim() === "") return;
        localStorage.setItem('myUserName', name);
        currentUserName = name;
        alert("Chào " + name + "!");
        loadCommentsFromCloud(); 
    }  

    if (!localStorage.getItem('myUserId')) {
        localStorage.setItem('myUserId', 'user_' + Math.random().toString(36).substr(2, 9));
    }
    const currentUserId = localStorage.getItem('myUserId');

    // 2. Danh sách bài đăng (Ảnh)
    const photos = [
        { 
            id: "img2", 
            src: ["img/HANVOIU.png","img/HANCAN5.png"], 
            caption: "Trùm bom keo" 
        },
        { 
            id: "img3", 
            src: ["img/QUANDOANFF.png"], 
            caption: "Kỷ niệm ngày thành lập" 
        }
    ];

    // 3. Lấy dữ liệu từ Cloud
    async function loadCommentsFromCloud() {
        try {
            const response = await fetch(`${scriptURL}?action=read`);
            const allComments = await response.json();
            renderGallery(allComments);
        } catch (error) {
            console.error("Lỗi kết nối:", error);
            renderGallery({}); 
        }
    }

    // 4. Hiển thị giao diện
    function renderGallery(allComments) {
        const gallery = document.getElementById('gallery');
        gallery.innerHTML = "";

        photos.forEach(photo => {
            const photoComments = allComments[photo.id] || [];
            const card = document.createElement('div');
            card.className = 'photo-card';
            
            card.innerHTML = `
                <div class="photo-grid">
                    ${photo.src.map(imgSrc => `<img src="${imgSrc}">`).join('')}
                </div>
                <div style="padding: 10px; font-weight: bold;">${photo.caption}</div>
                <div class="comment-section">
                    <div class="comment-list">
                        ${photoComments.map((c, index) => `
                            <div class="comment-item">
                                <span><b>${c.userName || 'Người lạ'}:</b> ${c.content}</span>
                                ${c.ownerId === currentUserId ? 
                                    `<button class="btn-delete" onclick="deleteComment('${photo.id}', ${index})">Xóa</button>` : ''}
                            </div>
                        `).reverse().join('')}
                    </div>
                    <div class="comment-input-area">
                        <input type="text" id="input-${photo.id}" placeholder="Viết bình luận...">
                        <button class="btn-comment" onclick="addCommentToCloud('${photo.id}')">Gửi</button>
                    </div>
                </div>
            `;
            gallery.appendChild(card);
        });
    }

    // 5. Gửi bình luận
    window.addCommentToCloud = function(photoId) {
        const input = document.getElementById(`input-${photoId}`);
        const text = input.value.trim();
        if (!text) return;

        input.disabled = true;
        const finalURL = `${scriptURL}?action=write&photoId=${photoId}&content=${encodeURIComponent(text)}&ownerId=${currentUserId}&userName=${encodeURIComponent(currentUserName)}`;

        fetch(finalURL)
        .then(() => {
            input.value = "";
            input.disabled = false;
            loadCommentsFromCloud();
        })
        .catch(() => {
            alert("Lỗi mạng, thử lại nhé!");
            input.disabled = false;
        });
    }

    window.deleteComment = function(photoId, index) {
        alert("Tính năng xóa đang bảo trì trên hệ thống Cloud.");
    }

    loadCommentsFromCloud(); -->